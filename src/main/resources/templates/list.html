<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org"
      xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
      layout:decorate="~{layout_admin.html}">
<head>
    <title layout:title="title">Danh sách Danh mục</title>
</head>
<body>
    <div layout:fragment="content">
        <div class="max-w-4xl mx-auto">
            <h1 class="text-xl font-semibold mb-4">Danh sách Danh mục</h1>
            <a th:href="@{/categories/add}" class="inline-block bg-indigo-600 text-white px-4 py-2 rounded-md mb-4 hover:bg-indigo-700">Thêm mới</a>

            <form th:action="@{/categories}" method="get" class="mb-4 flex space-x-2">
                <input type="text" name="keyword" th:value="${keyword}" placeholder="Tìm kiếm..." class="border border-gray-300 rounded-md shadow-sm p-2 w-64 focus:ring-indigo-500 focus:border-indigo-500">
                <button type="submit" class="bg-gray-500 text-white px-4 py-2 rounded-md hover:bg-gray-600">Tìm</button>
            </form>

            <table class="w-full border-collapse" th:if="${not #lists.isEmpty(categories)}">
                <thead>
                    <tr class="bg-gray-200">
                        <th class="border border-gray-300 p-2 text-left">ID</th>
                        <th class="border border-gray-300 p-2 text-left">Tên</th>
                        <th class="border border-gray-300 p-2 text-left">Mô tả</th>
                        <th class="border border-gray-300 p-2 text-left">Hành động</th>
                    </tr>
                </thead>
                <tbody>
                    <tr th:each="cate : ${categories}">
                        <td class="border border-gray-300 p-2" th:text="${cate.id}"></td>
                        <td class="border border-gray-300 p-2" th:text="${cate.name}"></td>
                        <td class="border border-gray-300 p-2" th:text="${cate.description}"></td>
                        <td class="border border-gray-300 p-2">
                            <a th:href="@{/categories/edit/{id}(id=${cate.id})}" class="bg-yellow-500 text-white px-2 py-1 rounded hover:bg-yellow-600">Sửa</a>
                            <a th:href="@{/categories/delete/{id}(id=${cate.id})}" class="bg-red-500 text-white px-2 py-1 rounded hover:bg-red-600" onclick="return confirm('Xóa?')">Xóa</a>
                        </td>
                    </tr>
                </tbody>
            </table>
            <p th:if="${#lists.isEmpty(categories)}" class="text-gray-500">Không có dữ liệu.</p>

            <nav th:if="${totalPages > 1}" class="mt-4">
                <ul class="flex space-x-2">
                    <li th:each="i : ${#numbers.sequence(0, totalPages - 1)}" class="page-item">
                        <a th:href="@{/categories(page=${i}, keyword=${keyword})}" th:text="${i + 1}" class="px-3 py-1 border border-gray-300 rounded-md hover:bg-indigo-600 hover:text-white"></a>
                    </li>
                </ul>
            </nav>
        </div>
    </div>
</body>
</html>